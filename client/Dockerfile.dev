FROM node:18-alpine

ARG CLIENT_PORT
ENV CLIENT_PORT ${CLIENT_PORT}

ARG CLIENT_URL
ENV CLIENT_URL ${CLIENT_URL}

ARG SERVER_URL
ENV SERVER_URL ${SERVER_URL}

ENV NEXT_SHARP_PATH=/app/node_modules/sharp

WORKDIR /app
COPY ./package.json .
RUN yarn
CMD yarn dev -p ${CLIENT_PORT}